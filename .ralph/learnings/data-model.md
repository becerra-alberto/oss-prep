# Learnings: data-model

- [Story 2.3] When extracting a phase that has both shared pattern content (Step 2.2 regex tables) and phase-specific content (Step 2.3 allowlist), the key transformation is surgical: replace the shared content with a \"Read patterns/X.md\" directive while keeping the phase-specific content verbatim inline. Also update sub-agent dispatch instructions to reference the patterns file instead of \"copy the patterns section below\". The Step 2.2 section should become a summary listing the 8 categories rather than being deleted entirely — this helps readers understand what the patterns file contains without needing to open it.
- [Story 2.3] When extracting a phase that has both shared pattern content (Step 2.2 regex tables) and phase-specific content (Step 2.3 allowlist), the key transformation is surgical: replace the shared content with a "Read patterns/X.md" directive while keeping the phase-specific content verbatim inline. Also update sub-agent dispatch instructions to reference the patterns file instead of "copy the patterns section below". The Step 2.2 section should become a summary listing the 8 categories rather than being deleted entirely — this helps readers understand what the patterns file contains without needing to open it.
- [Story 2.8] Phase 7 is the cleanest extraction of the series — no shared pattern library references, no bug fixes needed, no sub-agent parallelization. When a phase is purely self-contained with inline patterns (identity leak regexes, SDK tables), the extraction is a straightforward copy-and-reformat with the header block/I/O/gate additions. The key structural difference from phases that reference shared patterns (like Phase 1 referencing patterns/secrets.md) is that self-contained phases are simpler to validate — just confirm all tables and regex patterns were preserved verbatim.
- [Story 2.8] Phase 7 is the cleanest extraction of the series — no shared pattern library references, no bug fixes needed, no sub-agent parallelization. When a phase is purely self-contained with inline patterns (identity leak regexes, SDK tables), the extraction is a straightforward copy-and-reformat with the header block/I/O/gate additions. The key structural difference from phases that reference shared patterns (like Phase 1 referencing patterns/secrets.md) is that self-contained phases are simpler to validate — just confirm all tables and regex patterns were preserved verbatim.
